<section class="md-whiteframe-z2 admin-section">
    <md-toolbar class="md-secondary">
        <div class="md-toolbar-tools">
            <h3 class="ng-binding">Präsentation</h3>
        </div>
    </md-toolbar>

    <md-content>
      <md-tabs md-dynamic-height md-border-bottom>
        <md-tab label="Wettbewerb">
          <md-content class="md-padding">
            <div layout="row">
                <md-input-container style="width:200px;">
                    <label>1. Wettbewerb auswählen</label>
                    <md-select ng-model="event.view.competitionId" ng-change="updatePresentation()"
                               ng-disabled="event.view.competitionId">
                        <md-option ng-repeat="competition in event.competitions" value="{{competition.id}}">
                            {{competition.name}}
                        </md-option>
                    </md-select>
                </md-input-container>
                <md-button ng-disabled="!event.view.competitionId" ng-click="reset()">Zurücksetzen</md-button>
            </div>
            <div ng-disabled="!event.view.competitionId">
                <md-button ng-click="setScreen('intro')">1. Wettbewerb ankündigen</md-button>
            </div>
          </md-content>
        </md-tab>
        <md-tab label="Gruppe">
          <md-content class="md-padding">
            <div layout="row">
                <md-input-container style="width:200px;">
                    <label>2. Gruppe auswählen</label>
                    <md-select ng-model="event.view.groupId" ng-change="updatePresentation()"
                               ng-disabled="event.view.groupId">
                        <md-option
                                ng-repeat="group in getCompetition().groups"
                                value="{{group.id}}">
                            {{group.name}}
                        </md-option>
                    </md-select>
                </md-input-container>
                <md-button ng-disabled="!event.view.groupId" ng-click="resetGroup()">Zurücksetzen</md-button>
            </div>
            <div ng-disabled="!event.view.groupId">
                <md-button ng-click="setScreen('group')">1. Gruppe ankündigen</md-button>
            </div>
          </md-content>
        </md-tab>
        <md-tab label="Teilnehmer">
          <md-content class="md-padding">
            <md-input-container>
                <label>3. Teilnehmer auswählen</label>
                <md-select ng-model="event.view.participantId" style="width:200px;">
                    <md-option ng-if="getGroup().sacrifice" value="{{getGroup().sacrifice.id}}">OPFERLAMM, {{
                        (getGroup().sacrifice.id | participantOfId).name }}, {{ (getGroup().sacrifice.id |
                        participantOfId).slam }}
                    </md-option>
                    <md-option
                            ng-repeat="participant in getGroup().participants"
                            value="{{participant.id}}">
                        {{ (participant.id | participantOfId).name }}, {{ (participant.id | participantOfId).slam }}
                    </md-option>
                </md-select>
            </md-input-container>
            <div ng-if="event.view.participantId">
                <md-button ng-click="setScreen('participant', 'name')"
                           ng-class="{'md-primary': event.view.phase == 'name' && event.view.video != 'pause'}">1. Poet
                    anzeigen
                </md-button>
                <br>
                <md-button ng-click="setScreen('participant', 'rating')"
                           ng-class="{'md-primary': event.view.phase == 'rating' && event.view.video != 'pause'}">2.
                    Wertungen anzeigen
                </md-button>
                <br>
                <md-button ng-click="setScreen('participant', 'ratingFinal')"
                           ng-class="{'md-primary': event.view.phase == 'ratingFinal' && event.view.video != 'pause'}">
                    3. höchste / niedrigste Wertung
                    streichen
                </md-button>
                <br>
                <md-button ng-click="setScreen('participant', 'total')"
                           ng-class="{'md-primary': event.view.phase == 'total' && event.view.video != 'pause'}">4.
                    Wertungssumme anzeigen
                </md-button>
                <br>
                <md-button ng-click="setScreen('groupRatings')"
                           ng-class="{'md-primary': event.view.phase == 'groupRatings' && event.view.video != 'pause'}"
                           ng-disabled="event.view.participantId == getGroup().sacrifice.id">5. Zwischenstand der Gruppe
                    anzeigen
                </md-button>
                <br>

                <div ng-disabled="!(event.view.screen == 'participant' && event.view.phase != 'name')">
                    <p>Wertungen</p>
                    <md-input-container ng-repeat="score in getScores()">
                        <label>Wertung {{$index+1}}</label>
                        <input ng-model="score.value" ng-blur="updatePresentation()"
                               ng-keydown="$event.which === 13 && updatePresentation()">
                    </md-input-container>
                </div>
            </div>
          </md-content>
        </md-tab>
        <md-tab label="Ergebnis">
          <md-content class="md-padding">
            <p>
                <small style="color:rgba(0,0,0,0.54)">4. Wenn alle Teilnehmer bewertet wurden:</small>
            </p>
            <md-button ng-click="showGroupWinners()">1. Ergebnisse der Gruppe anzeigen</md-button>
            <div ng-if="event.view.screen == 'groupRatings' && event.view.phase == 'winners'">
                <md-button ng-click="increaseWinnerCount()">1.1 Nächsten Poet anzeigen</md-button>
            </div>
            <br>
            <p style="padding-left:13px;">3. Gruppe zurücksetzen, falls noch nicht am Ende des Wettbewerbs (siehe
                oben)</p>

            <div>
                <br>
                <p>
                    Extrapunkte
                    <small style="color:rgba(0,0,0,0.54)">bei Punktgleichheit</small>
                    :
                </p>
                <div ng-repeat="group in getCompetition().groups">
                    <p>
                        <small style="color:rgba(0,0,0,0.54)">{{group.name}}</small>
                    </p>
                    <md-input-container ng-repeat="participant in group.participants">
                        <label>{{ (participant.id | participantOfId).name }}, {{ (participant.id |
                            participantOfId).slam}}</label>
                        <input ng-model="participant.extraScore" ng-blur="updatePresentation()"
                               ng-keydown="$event.which === 13 && updatePresentation()"
                               ng-disabled="event.view.screen != 'competitionRatings'">
                    </md-input-container>
                </div>
            </div>
          </md-content>
        </md-tab>
        <md-tab label="Ende">
          <md-content class="md-padding">
            <p>
                <small style="color:rgba(0,0,0,0.54)">5. Am Ende des Wettbewerbs:</small>
            </p>
            <md-button ng-click="showCompetitionWinners()">1. Gewinner des Wettbewerbs anzeigen</md-button>
            <br>
            <md-button ng-disabled="event.view.screen  != 'competitionRatings'" ng-click="increaseWinnerCount()">1.1 Nächsten Gewinner anzeigen</md-button>
          </md-content>
        </md-tab>
      </md-tabs>
    </md-content>
</section>

<section class="md-whiteframe-z2 admin-section">
  <md-toolbar class="md-secondary">
      <div class="md-toolbar-tools">
          <h3 class="ng-binding">Einblendungen</h3>
      </div>
  </md-toolbar>

  <md-tabs md-dynamic-height md-border-bottom>
    <md-tab label="Text">
      <md-content class="md-padding">
        <md-input-container style="margin-bottom: 0">
            <label>Erste Zeile</label>
            <input ng-model="event.view.customText" ng-blur="updatePresentation()"
                   ng-keydown="$event.which === 13 && updatePresentation()">
        </md-input-container>
        <md-input-container style="margin-bottom: 0">
            <label>Zweite Zeile</label>
            <input ng-model="event.view.customTextSubline" ng-blur="updatePresentation()"
                   ng-keydown="$event.which === 13 && updatePresentation()">
        </md-input-container>
        <md-button ng-disabled="!event.view.customText" ng-click="setScreen('customText')">Anzeigen</md-button>
      </md-content>
    </md-tab>
    <md-tab label="Video">
      <md-content class="md-padding">
        <div class="md-whiteframe-z2" ng-repeat="video in $event.files.videos">
          {{video.name}}
          <br>
          <video controls file="video.file"></video>
        </div>
      </md-content>
    </md-tab>
    <md-tab label="Audio">
      <md-content class="md-padding">
        lorem ipsum
      </md-content>
    </md-tab>
  </md-tabs>
</section>
